#!/usr/bin/env bash

set -e

build-documentation () {
    sphinx-build -b html doc build
}

move-to-pages () {
    git checkout gh-pages
    cp -Rf build/* ./
}

commit-and-push () {
    git add -Av .
    git commit -am "Build" --allow-empty
    git push origin gh-pages
}

checkout-master () {
    git checkout master
}

main () {
    build-documentation
    move-to-pages
    commit-and-push
    checkout-master
}

main > /dev/null
